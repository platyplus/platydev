# ! ########################################################################### ! #
# ! #|     THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY     |# ! #
# ! ########################################################################### ! #

FROM node:14-alpine

RUN npm i lerna -g --loglevel error
USER node

RUN mkdir /home/node/app
WORKDIR /home/node/app

EXPOSE 3000

COPY --chown=node:node package.json yarn.* lerna.json tsconfig.json tsconfig.build.json .eslintrc.js .eslintignore ./
#
COPY --chown=node:node easynut/vue/package.json easynut/vue/yarn.* /home/node/app/easynut/vue/
COPY --chown=node:node packages/vue-hasura-backend-plus/package.json packages/vue-hasura-backend-plus/yarn.* /home/node/app/packages/vue-hasura-backend-plus/

RUN yarn
#
COPY --chown=node:node easynut/vue /home/node/app/easynut/vue
COPY --chown=node:node packages/vue-hasura-backend-plus /home/node/app/packages/vue-hasura-backend-plus

# RUN yarn workspace @platyplus/easy-vue add typescript@'<4'

CMD yarn workspace @platyplus/easy-vue dev
# CMD lerna run --parallel dev
